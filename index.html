<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE-edge"/>
        
        <title>Vienna social housing</title>

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

        <link href="https://api.mapbox.com/mapbox-gl-js/v3.6.0/mapbox-gl.css" rel="stylesheet">
        <link rel="stylesheet" href="./css/style.css">

        <script src="https://api.mapbox.com/mapbox-gl-js/v3.6.0/mapbox-gl.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    </head>

    <body>

        <main>

            <!-- Sidebar -->
            <div id="sidebar">
                <div id="intro-sidebar">
                    <section id="intro">
                        <h1>X-RAY OF VIENNA SOCIAL HOUSING</h1>
                        <h5> Vienna's social housing system is a world-renowned example. This interactive map explores its location, accessibility, and distribution across districts.  </h5>
                    </section>
                    
                    <section id="background">
                        <h2> BACKGROUND </h2>
                        <p id="textContent">
                            By 1918, post-First World War, Vienna’s population was around two million. Inherited from the Habsburg Empire, severe housing shortages and deplorable living conditions persisted.
                            Social housing initiatives began in 1919 with the victory of the Social Democratic Party. The period of Red Vienna (Rote Wien)(1919–1934) envisioned the non-commodified modern city as an emancipating project. This period gained momentum with Vienna's provincial status in 1922, which gave Vienna control over its own taxes. Tax reforms in 1923, by Hugo Breitner, allowed Vienna to buy land and properties to fund council housing projects. In 1923, the City Council aimed to build 25,000 flats in five years, completed by 1926. Another program in 1927 added 30,000 more. The focus was on creating healthy living conditions, coined "fresh air, light, and sunshine." 
                            <span id="moreText">The Second World War destroyed 87,000 homes and priority was given to rebuilding. Between 1945 and 1960 close to 4,200 new municipal flats per year were constructed. Municipal and non-municipal sectors (co-operatives and associations) collaborated in housing production, with the latter erecting approx. 25 percent of all new dwellings. The reconstruction of Vienna was completed already before 1960. Council housing construction slowed in the 1970s, shifting towards public-private partnerships. In 1973, the number of flats completed by these partnerships exceeded that of municipal flats. This trend was influenced by the European Union’s regulation which limited public debt and investments making impossible to invest in social housing. Significant legislative reforms were made in the 1980s and 1990s, such as the liberalization of rent regulations and the establishment of the Housing Fund Vienna (Wohnfonds Wien) for managing municipal land and urban renewal subsidies. This subsidies offered low-interest loans to landlords in exchange for limited rents post-renovation. It also fostered tenant collaboration in building renovations to alleviate cultural and social displacement. Yet, the contemporary housing scene presents new challenges. The reliance on non-profit associations for social rental housing since 2004 underscores changing dynamics in housing provision, while the liberalization of rent regulations in the private market by the national government since 2010 has reshaped the balance between social and private housing sectors, particularly in the context of heightened migration and refugee influxes.
                            </span>
                        </p>
                        <button class="red-btn" id="readMoreBtn">Keep Reading</button>
                    </section>

                    <button class="white-btn" id="BtnToMap"> To the map</button>

                    <section id="footer">
                        <p> by Camila Narbaitz Sarsur</p>
                        <p><a href="http://www.cnscartography.com" target="_blank">www.cnscartography.com</a></p>
                    </section>
                </div>
                <div id="map-sidebar">
                    <section class="intro">
                        <h1>X-RAY OF VIENNA SOCIAL HOUSING</h1>
                        <h5>Here you can explore Vienna's green space and public transport coverage, while seeing the location of the social housing developments on the map.</h5>
                    </section>
                    
                    <section class="properties">
                        <div class="field">
                            <h4>HOUSING CONSTRUCTION YEAR
                                <button title="Explanation" class="question-button">
                                    <img src="svg/question-circle.svg" alt="question mark" width="20" height="20">
                                </button>
                            </h4>
                            <div class="slider">
                                <input type="range" id="yearSlider" min="1900" max="2023" value="2023" step="1">
                                <span id="selectedYear">2023</span>
                            </div>
                        </div>
                        <div class="field">
                            <h4>DISTANCE COVERED by Green Spaces
                                <button title="Explanation" class="question-button">
                                    <img src="svg/question-circle.svg" alt="question mark" width="20" height="20">
                                </button>
                            </h4>
                            
                            <div class="slider">
                                <h4>Big Green spaces</h4>
                                <span style="width: 1rem;"></span>
                                <input id="big-green-coverage" type="range" min="0" max="800" step="100">
                                <label for="big-green-coverage" style="left: -2rem;">
                                    <mark id="big-buffer-distance">0m</mark>
                                </label>
                            </div>

                            <div class="slider">
                                <h4>Medium Green Spaces</h4>
                                <input id="medium-green-coverage" type="range" min="0" max="400" step="100" value="0">
                                <label for="medium-green-coverage">
                                    <mark id="medium-buffer-distance">0m</mark>
                                </label>
                            </div>
                            
                            <div class="slider">
                                <h4>Small Green Spaces</h4>
                                <input id="small-green-coverage" type="range" min="0" max="200" step="50" value="0">
                                <label for="small-green-coverage">
                                    <mark id="small-buffer-distance">0m</mark>
                                </label>
                            </div>

                        </div>
                        <div class="field">
                            <h4>DISTANCE COVERED by Public Transport
                                <button title="Explanation" class="question-button">
                                    <img src="svg/question-circle.svg" alt="question mark" width="20" height="20">
                                </button>
                            </h4>
                            
                            <div class="slider">
                                <h4>Bus Stops</h4>
                                <span style="width: 1rem;"></span>
                                <input id="bus-buffer" type="range" min="0" max="400" step="100" value="0">
                                <label for="bus-buffer">
                                    <mark id="bus-buffer-distance">0m</mark>
                                </label>
                            </div>
                        
                            <div class="slider">
                                <h4>U-Bahn Stops</h4>
                                <input id="ubahn-buffer" type="range" min="0" max="800" step="100" value="0">
                                <label for="ubahn-buffer">
                                    <mark id="ubahn-buffer-distance">0m</mark>
                                </label>
                            </div>
                        </div>
                    </section>
                    
                    <section class ="elegibility">
                        <button class="white-btn" id="btnToCheckEligibility">Check Eligibility</button>

                    </section>

                    <button class="white-btn" id="BtnToInfo"> Back to Info</button>
                    
                    
                </div>
                <div id="form-sidebar" style="display:none;">
                    <button id="closeFormBtn" style="position: absolute; top: 10px; right: 10px;">&times;</button>
                    <div class="form-container">
                        <section class="eligibility-form">
                            <form id="eligibilityForm">
                                
                                <!-- Citizenship Input -->
                                <div class="form-group">
                                    <label for="citizenship">Do you have Austrian Citizenship or equivalent?</label>
                                    <select id="citizenship" name="citizenship" required>
                                        <option value="">Select</option>
                                        <option value="yes">Yes</option>
                                        <option value="no">No</option>
                                    </select>
                                    <small id="citizenshipMsg" class="error-msg"></small>
                                </div>

                                <!-- Age Input -->
                                <div class="form-group">
                                    <label for="age">Your Age:</label>
                                    <input type="number" id="age" name="age" min="18" required>
                                    <small id="ageMsg" class="error-msg"></small>
                                </div>

                                <!-- Registration Input -->
                                <div class="form-group">
                                    <label for="registration">Years Registered in Vienna:</label>
                                    <input type="number" id="registration" name="registration" min="3" required>
                                    <small id="registrationMsg" class="error-msg"></small>
                                </div>

                                <!-- Income Input -->
                                <div class="form-group">
                                    <label for="income">Total Annual Household Income (in €):</label>
                                    <input type="number" id="income" name="income" min="0" required>
                                    <small id="incomeMsg" class="error-msg"></small>
                                </div>

                                <!-- Eligibility Message -->
                                <div id="eligibilityMessage" class="message"></div>

                                <!-- Family Size Input (Hidden Initially) -->
                                <div id="familySizeGroup" class="form-group" style="display:none;">
                                    <label for="familySize">Enter the total number of family members:</label>
                                    <input type="number" id="familySize" name="familySize" min="1">
                                    <small id="familySizeMsg" class="error-msg"></small>
                                </div>

                                <!-- Eligibility Message -->
                                <div id="suitableHouseMessage" class="message"></div>

                                <!-- Submit Button -->
                                <button type="submit" class="white-btn">Check Eligibility</button>

                            </form>
                        </section>
                    </div>
                </div>
            </div>

            <!-- Popup Window -->
            <div id="popup" class="popup-window">
                <span class="popup-close" onclick="togglePopup()">&times;</span>
                <p>This is an explanation about green spaces coverage.</p>
            </div>

            <div id="viewToggle">
                <button id="mapViewBtn">MAP</button>
                <button id="districtsViewBtn">DISTRICTS</button>
            </div>
            
            <!-- Map View (Default)-->
            <div id="map" class="map">
                <div id="loading-spinner" class="loading-spinner" class="spinner"></div>
            </div>

            <!-- Districts View -->
            <div id="districtsView" class="districts-view" style="display: none;">
                <section>
                        
                    <section class="radarExplanation">
                        <img src="svg/reference.svg" alt="District Reference">
                        <section>
                            <h2>District Radar Graphs</h2>
                            <p>These 23 radar graphs compare Vienna's districts, highlighting various key factors and offering
                                a holistic view of their urban characteristics. Despite Vienna's well-distributed social housing,
                                contributing to a diverse social and cultural mix, disparities still exist among districts.</p>
                        </section>
                    </section>
                    <section id="radarGraphs">
                        <img src="svg/d1.svg" alt="District Reference">
                        <img src="svg/d2.svg" alt="District Reference">
                        <img src="svg/d3.svg" alt="District Reference">
                        <img src="svg/d4.svg" alt="District Reference">
                        <img src="svg/d5.svg" alt="District Reference">
                        <img src="svg/d6.svg" alt="District Reference">
                        <img src="svg/d7.svg" alt="District Reference">
                        <img src="svg/d8.svg" alt="District Reference">
                        <img src="svg/d9.svg" alt="District Reference">
                        <img src="svg/d10.svg" alt="District Reference">
                        <img src="svg/d11.svg" alt="District Reference">
                        <img src="svg/d12.svg" alt="District Reference">
                        <img src="svg/d13.svg" alt="District Reference">
                        <img src="svg/d14.svg" alt="District Reference">
                        <img src="svg/d15.svg" alt="District Reference">
                        <img src="svg/d16.svg" alt="District Reference">
                        <img src="svg/d17.svg" alt="District Reference">
                        <img src="svg/d18.svg" alt="District Reference">
                        <img src="svg/d19.svg" alt="District Reference">
                        <img src="svg/d20.svg" alt="District Reference">
                        <img src="svg/d21.svg" alt="District Reference">
                        <img src="svg/d22.svg" alt="District Reference">
                        <img src="svg/d23.svg" alt="District Reference">
                    </section>
                </section>
            </div>
               
                    
           
            
            
        </main>
        
        <!-- Map View (Default)-->
        <script src="https://cdn.jsdelivr.net/npm/@turf/turf@7/turf.min.js"></script>
        <script type="module" src="./js/main.js"></script>

    </body>   
</html>